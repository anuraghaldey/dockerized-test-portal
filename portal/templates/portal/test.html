{% extends "base.html" %}
{% load static %}

{% block title %}{{ test.test_name }} Test{% endblock title %}

{% block styles %}
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/default.min.css">
  <link rel="stylesheet" href="{% static '/portal/test-style.css' %}">
  {% csrf_token %}
{% endblock styles %}

{% block content %}
  <nav>
    <input type="hidden" name="csrfmiddlewaretoken" value="{{ csrf_token }}">
    <div class="nav-div">
      <div class="nav-content">
        <img src="{% static 'portal/sokalp.png' %}" alt="" />
        <div id="countdownExample">
          <p id='time' class="time-p">00:30</p>
          <script>
              function startTimer(duration, display) {
                var timer = duration, minutes, seconds;
                setInterval(function () {
                    minutes = parseInt(timer / 60, 10);
                    seconds = parseInt(timer % 60, 10);
            
                    minutes = minutes < 10 ? "0" + minutes : minutes;
                    seconds = seconds < 10 ? "0" + seconds : seconds;
            
                    display.textContent = minutes + ":" + seconds;
            
                    if (--timer < 0) {
                        timer = duration;
                    }
                }, 1000);
            }
            
            var fiveMinutes = 60 * 0.5,
                display = document.querySelector('#time');
            startTimer(fiveMinutes, display);
          </script>
      </div>
      </div>
    </div>
  </nav>
  <div class="parent">
    <div class="pallette-div">
      <div id="column-pallette" class="column-pallette">
        {% for i in nums %}
          <div class='individual-question' onclick='handlePaletteClick(this.id)' id='{{ i.question_id }}'>{{ i.i }}</div>
        {% endfor %}
      </div>
      <button class="saveandnext" onclick="finishTest()">Finish Test</button>
    </div>
    <div class="question-div">
      <p class="question-number">
        Question <span id="question-number">1</span> / {{ question_len }}
      </p>
      <p id="question-para" class="question-text">
        Question Text
      </p>

      <div class='op-div'>
        <input type="radio" name="answer" value="op1" id="op1-r" />
        <label id='op1' for="op1-r">Option 1</label>
      </div>

      <div class="op-div">
        <input type="radio" name="answer" value="op2" id="op2-r" />
        <label id='op2' for="op2-r">Option 2</label>
      </div>
      
      <div class='op-div'>
        <input type="radio" name="answer" value="op3" id="op3-r" />
        <label id='op3' for="op3-r">Option 3</label>
      </div>

      <div class='op-div'>
        <input type="radio" name="answer" value="op4" id="op4-r" />
        <label id='op4' for="op4-r">Option 4</label>
      </div>

      <script>
        const number_of_questions = {{ question_len }}
        const savedAnswers = JSON.parse("{{saved_answers|escapejs}}"); 
        let currQuestionID = {{ first_qid }};
      </script>

      <script src='{% static "portal/test.js" %}'></script>

      <div class="navigation-button">
        <button name="saveandnext" id="save" class="saveandnext" onclick="handleSave()">Save</button>
        <button name="saveandnext" id="saveandnext" class="saveandnext" onclick="handleSaveAndNext()">Save and Next</button>
        <button name="saveandnext" id="next" class="saveandnext" onclick="handleNext()">Next</button>
        <button name="goback" id="goback" class="saveandnext" onclick="handleBack()">Go Back</button>
      </div>
      
    </div>
  </div>
{% endblock content %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
